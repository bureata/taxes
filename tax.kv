<DeletePopup>
    size_hint: 0.6, 0.3
    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
    BoxLayout:
        orientation: 'vertical'

        Label:
            font_size: 30
            text: root.message_prop
        
        Label:
            font_size: 19
            text: root.details_prop

        BoxLayout:
            orientation: 'horizontal'

            Button:
                text: 'Yes'
                on_press: root.confirm()

            Button:
                text: 'No'
                on_press: root.dismiss()

<EditIncomePopup>
    title_size: 20
    title: 'Edit Income'
    size_hint: None, None
    size: 500, 230  # Adjust size as needed

    BoxLayout:
        orientation: 'vertical'

        BoxLayout:
            orientation: 'horizontal'
            padding: 10

            Label:
                size_hint: 0.2, 1
                font_size: 20
                text: 'ID'

            Label:
                size_hint: 0.5, 1
                font_size: 20
                text: 'Amount'

            Label:
                font_size: 20
                text: 'Date'

            Label:
                font_size: 20
                text: 'Serial Number'

        BoxLayout:
            orientation: 'horizontal'
            padding: 10

            Label:
                size_hint: 0.2, 1
                font_size: 20
                text: root.id_prop

            TextInput:
                write_tab: False
                size_hint: 0.5, 1
                font_size: 20
                input_type: 'number'
                input_filter: 'float'
                id: amount_input
                multiline: False

            TextInput:
                write_tab: False
                font_size: 20
                id: date_input
                multiline: False

            TextInput:
                write_tab: False
                font_size: 20
                id: serialnr_input
                multiline: False

        BoxLayout:
            size_hint_y: None
            height: '44dp'

            Button:
                text: 'Save'
                on_press: root.save()

            Button:
                text: 'Cancel'
                on_press: root.dismiss()

<IncomeWidget>
    orientation: 'horizontal'
    size_hint: 1, None
    height: 50
    padding: [10, 10]

    Label:
        size_hint: 0.15, 1
        widget: 10
        font_size: 20
        id: id_label
        text: root.id_prop

    Label:
        font_size: 20
        id: amount_label
        text: root.amount_prop
    
    Label:
        font_size: 20
        id: date_label
        text: root.date_prop

    Label:
        font_size: 20
        id: serialnr_label
        text: root.serialnr_prop

    Button:
        font_size: 20
        size_hint: 0.5, 1
        id: edit_button
        text: 'Edit'
        on_press: root.edit_income()

    Button:
        font_size: 20
        size_hint: 0.5, 1
        id: delete_button
        text: 'Delete'
        on_press: root.delete_income() 

<IncomeLayout>
    orientation: 'vertical'
    canvas.before:
        Color:
            rgba: 0, 1, 0.5, 0.2
        Rectangle:
            # self here refers to the widget i.e FloatLayout
            pos: self.pos
            size: self.size
    spacing: 20

    BoxLayout:
        size_hint: 1, None
        height: 30
        orientation: 'horizontal'
        padding: 10, 10

        Label:
            size_hint: 0.15, 1
            font_size: 20
            text: 'ID'

        Label:
            font_size: 20
            text: 'Amount'

        Label:
            font_size: 20
            text: 'Date'

        Label:
            font_size: 20
            text: 'Serial Nr'

        Label:
            size_hint: 0.5, 1
            font_size: 20
            text: ''

        Label:
            size_hint: 0.5, 1
            font_size: 20
            text: ''

    BoxLayout:
        orientation: 'horizontal'
        size_hint: None, None
        height: 30 + 2 * 10
        width: root.width
        padding: 10, 10

        Label:
            id: income_id
            size_hint: 0.15, 1

        TextInput:
            write_tab: False
            id: amount_input
            input_type: 'number'
            input_filter: 'float'
            multiline: False

        TextInput:
            write_tab: False
            id: date_input
            multiline: False

        TextInput:
            write_tab: False
            id: serialnr_input
            multiline: False

        Button:
            size_hint: 1, 1
            text: 'Add Income'
            on_press: root.add_income()

    ScrollView:
        id: scroll
        do_scroll_x: False  # Disable horizontal scrolling

        BoxLayout:
            id: income_entries
            orientation: 'vertical'
            size_hint_y: None
            height: self.minimum_height
            spacing: 10

#    Button:
#        size_hint: 1, 0.1
#        text: 'Nuke DB'
#        on_press: root.nuke()

<EditExpensePopup>
    title_size: 20
    title: 'Edit Expense'
    size_hint: None, None
    size: 1000, 230  # Adjust size as needed

    BoxLayout:
        orientation: 'vertical'

        BoxLayout:
            orientation: 'horizontal'
            padding: 10

            Label:
                size_hint: 0.2, 1
                font_size: 20
                text: 'ID'

            Label:
                size_hint: 0.5, 1
                font_size: 20
                text: 'Amount'

            Label:
                font_size: 20
                text: 'Date'

            Label:
                size_hint: 0.7, 1
                font_size: 20
                text: 'Deduct %'

            Label:
                font_size: 20
                text: 'Serial Number'

            Label:
                font_size: 20
                text: 'ID Expense'

            Label
                font_size: 20
                text: 'ID Income'
            
            Label
                size_hint: 0.3, 1
                font_size: 20
                text: 'VAT'

        BoxLayout:
            orientation: 'horizontal'
            padding: 10

            Label:
                size_hint: 0.2, 1
                font_size: 20
                text: root.id_prop

            TextInput:
                write_tab: False
                size_hint: 0.5, 1
                font_size: 20
                input_type: 'number'
                input_filter: 'float'
                id: amount_input
                multiline: False

            TextInput:
                write_tab: False
                font_size: 20
                id: date_input
                multiline: False

            TextInput:
                write_tab: False
                font_size: 20
                size_hint: 0.7, 1
                input_type: 'number'
                input_filter: 'float'
                id: deduct_percent_input
                multiline: False

            TextInput:
                write_tab: False
                font_size: 20
                id: serialnr_input
                multiline: False

            TextInput:
                write_tab: False
                font_size: 20
                input_type: 'number'
                input_filter: 'int'
                id: id_expense_input
                multiline: False

            TextInput:
                write_tab: False
                font_size: 20
                input_type: 'number'
                input_filter: 'int'
                id: id_income_input
                multiline: False

            CheckBox:
                size_hint: 0.3, 1
                id: vat_check
                active: True if root.check_vat_prop else False
                #on_active: root.on_checkbox_active(self, self.active)

        BoxLayout:
            size_hint_y: None
            height: '44dp'

            Button:
                text: 'Save'
                on_press: root.save()

            Button:
                text: 'Cancel'
                on_press: root.dismiss()

<ExpenseWidget>
    orientation: 'horizontal'
    size_hint: 1, None
    height: 50
    padding: [10, 10]

    Label:
        size_hint: 0.15, 1
        widget: 10
        font_size: 20
        id: id_label
        text: root.id_prop

    Label:
        size_hint: 0.5, 1
        font_size: 20
        id: amount_label
        text: root.amount_prop
    
    Label:
        font_size: 20
        id: date_label
        text: root.date_prop

    Label:
        size_hint: 0.7, 1
        font_size: 20
        id: deduct_percent_label
        text: root.deduct_percent_prop

    Label:
        font_size: 20
        id: serialnr_label
        text: root.serialnr_prop

    Label:
        size_hint: 0.7, 1
        font_size: 20
        id: id_expense_label
        text: root.id_expense_prop

    Label:
        size_hint: 0.7, 1
        font_size: 20
        id: id_income_label
        text: root.id_income_prop

    Label:
        size_hint: 0.3, 1
        font_size: 20
        id: check_vat
        text: 'yes' if root.check_vat_prop else 'no'

    Button:
        font_size: 20
        size_hint: 0.5, 1
        id: edit_button
        text: 'Edit'
        on_press: root.edit_expense()

    Button:
        font_size: 20
        size_hint: 0.5, 1
        id: delete_button
        text: 'Delete'
        on_press: root.delete_expense() 


<ExpenseLayout>
    orientation: 'vertical'
    canvas.before:
        Color:
            rgba: 1, 0.2, 0.1, 0.2
        Rectangle:
            # self here refers to the widget i.e FloatLayout
            pos: self.pos
            size: self.size
    spacing: 20

    BoxLayout:
        size_hint: 1, None
        height: 30
        orientation: 'horizontal'
        padding: 10, 10

        Label:
            size_hint: 0.15, 1
            font_size: 20
            text: 'ID'

        Label:
            size_hint: 0.5, 1
            font_size: 20
            text: 'Amount'

        Label:
            font_size: 20
            text: 'Date'

        Label:
            size_hint: 0.7, 1
            font_size: 20
            text: 'Deduct %'

        Label:
            font_size: 20
            text: 'Serial Nr'

        Label:
            size_hint: 0.7, 1
            font_size: 20
            text: 'ID Expense'

        Label:
            size_hint: 0.7, 1
            font_size: 20
            text: 'ID Income'
        
        Label:
            size_hint: 0.3, 1
            font_size: 20
            text: 'VAT'

        Label:
            size_hint: 0.5, 1
            font_size: 20
            text: ''

        Label:
            size_hint: 0.5, 1
            font_size: 20
            text: ''

    BoxLayout:
        orientation: 'horizontal'
        size_hint: None, None
        height: 30 + 2 * 10
        width: root.width
        padding: 10, 10

        Label:
            size_hint: 0.15, 1

        TextInput:
            write_tab: False
            size_hint: 0.5, 1
            id: amount_input
            input_type: 'number'
            input_filter: 'float'
            multiline: False

        TextInput:
            write_tab: False
            id: date_input
        
        TextInput:
            write_tab: False
            size_hint: 0.7, 1
            id: deduct_percent_input
            input_type: 'number'
            input_filter: 'float'
            multiline: False
            text: '100'

        TextInput:
            write_tab: False
            id: serialnr_input

        TextInput:
            write_tab: False
            size_hint: 0.7, 1
            id: id_expense_input
            input_type: 'number'
            input_filter: 'int'
            multiline: False

        TextInput:
            write_tab: False
            size_hint: 0.7, 1
            id: id_income_input
            input_type: 'number'
            input_filter: 'int'
            multiline: False

        CheckBox:
            size_hint: 0.3, 1
            id: vat_check
            active: False
            #on_active: root.on_checkbox_active(self, self.active)

        Button:
            size_hint: 1, 1
            text: 'Add Expense'
            on_press: root.add_expense()

    ScrollView:
        id: scroll
        do_scroll_x: False  # Disable horizontal scrolling

        BoxLayout:
            id: expense_entries
            orientation: 'vertical'
            size_hint_y: None
            height: self.minimum_height
            spacing: 10

<TaxesLayout>
    orientation: 'vertical'
    size_hint: 1, 0.1
    canvas:
        Color:
            rgba: 0.01, 0.1, 0.1, 1  # Red color (replace with desired color values)
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: 'horizontal'
        Label:
            text: "Total income"
        Label:
            text: "Total expense"
        Label:
            text: "Deductible"
        Label:
            text: "CASS (10%)"
        Label:
            text: "CAS (25%)"
        Label:
            text: "Income TAX"
        Label:
            text: "Total TAXES"
        Label:
            text: "Profit"
    BoxLayout:
        orientation: 'horizontal'
        Label:
            id: income
            text: f'{root.income:.2f}'
        Label:
            id: expense
            text: f'{root.expense:.2f}'
        Label:
            id: deductible
            text: f'{root.deductible:.2f}'
        Label:
            id: cass
            text: f'{root.cass:.2f}'
        Label:
            id: cas
            text: f'{root.cas:.2f}'
        Label:
            id: income_tax
            text: f'{root.income_tax:.2f}'
        Label:
            id: total_tax
            text: f'{root.total_tax:.2f}'
        Label:
            id: profit
            text: f'{root.profit:.2f}'
    Button:
        text: 'Refresh'
        on_press: root.update_widget()

<MainWindow>
    orientation: 'vertical'
    padding: '10dp'
    spacing: '10dp'

    BoxLayout:
        orientation: 'horizontal'
        spacing: 10
        
        IncomeLayout:
            size_hint: 0.8, 1
        ExpenseLayout:
            
    TaxesLayout:
        id: taxes_layout
        

    Button:
        text: 'Reload'
        size_hint: None, None
        size: 100, 50
        pos_hint: {'top': 1, 'left': 1}
        on_press: app.reload_app(self)
