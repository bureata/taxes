<DeletePopup>:
    size_hint: 0.6, 0.3
    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
    BoxLayout:
        orientation: 'vertical'

        Label:
            font_size: 30
            text: root.message_prop
        
        Label:
            font_size: 19
            text: root.details_prop

        BoxLayout:
            orientation: 'horizontal'

            Button:
                text: 'Yes'
                on_press: root.confirm()

            Button:
                text: 'No'
                on_press: root.dismiss()

<EditIncomePopup>:
    title_size: 20
    title: 'Edit Income'
    size_hint: None, None
    size: 500, 230  # Adjust size as needed

    BoxLayout:
        orientation: 'vertical'

        BoxLayout:
            orientation: 'horizontal'
            padding: 10

            Label:
                size_hint: 0.2, 1
                font_size: 20
                text: 'ID'

            Label:
                size_hint: 0.5, 1
                font_size: 20
                text: 'Amount'

            Label:
                font_size: 20
                text: 'Date'

            Label:
                font_size: 20
                text: 'Serial Number'

        BoxLayout:
            orientation: 'horizontal'
            padding: 10

            Label:
                size_hint: 0.2, 1
                font_size: 20
                text: root.id_prop

            TextInput:
                size_hint: 0.5, 1
                font_size: 20
                input_type: 'number'
                input_filter: 'float'
                id: amount_input
                multiline: False

            TextInput:
                font_size: 20
                id: date_input
                multiline: False

            TextInput:
                font_size: 20
                id: serialnr_input
                multiline: False

        BoxLayout:
            size_hint_y: None
            height: '44dp'

            Button:
                text: 'Save'
                on_press: root.save()

            Button:
                text: 'Cancel'
                on_press: root.dismiss()

<IncomeWidget>:
    orientation: 'horizontal'
    size_hint: 1, None
    height: 50
    padding: [10, 10]

    Label:
        size_hint: 0.15, 1
        widget: 10
        font_size: 20
        id: id_label
        text: root.id_prop

    Label:
        font_size: 20
        id: amount_label
        text: root.amount_prop
    
    Label:
        font_size: 20
        id: date_label
        text: root.date_prop

    Label:
        font_size: 20
        id: serialnr_label
        text: root.serialnr_prop

    Button:
        font_size: 20
        size_hint: 0.5, 1
        id: edit_button
        text: 'Edit'
        on_press: root.edit_income()

    Button:
        font_size: 20
        size_hint: 0.5, 1
        id: delete_button
        text: 'Delete'
        on_press: root.delete_income() 

<IncomeLayout>:
    orientation: 'vertical'
    canvas.before:
        Color:
            rgba: 0, 1, 0.5, 0.2
        Rectangle:
            # self here refers to the widget i.e FloatLayout
            pos: self.pos
            size: self.size
    spacing: 20

    BoxLayout:
        size_hint: 1, None
        height: 30
        orientation: 'horizontal'
        padding: 10, 10

        Label:
            size_hint: 0.15, 1
            font_size: 20
            text: 'ID'

        Label:
            font_size: 20
            text: 'Amount'

        Label:
            font_size: 20
            text: 'Date'

        Label:
            font_size: 20
            text: 'Serial Nr'

        Label:
            size_hint: 0.5, 1
            font_size: 20
            text: ''

        Label:
            size_hint: 0.5, 1
            font_size: 20
            text: ''

    ScrollView:
        id: scroll
        do_scroll_x: False  # Disable horizontal scrolling

        BoxLayout:
            id: income_entries
            orientation: 'vertical'
            size_hint_y: None
            height: self.minimum_height
            spacing: 10

    BoxLayout:
        orientation: 'horizontal'
        size_hint: None, None
        size: root.width, 30

        TextInput:
            id: amount_input
            input_type: 'number'
            input_filter: 'float'
            multiline: False
            hint_text: 'Amount'

        TextInput:
            id: date_input
            multiline: False
            hint_text: 'Date'

        TextInput:
            id: serialnr_input
            multiline: False
            hint_text: 'Serial Number'

        Button:
            text: 'Add Income'
            on_press: root.add_income()

        Button:
            text: 'Nuke DB'
            on_press: root.nuke()

<EditExpensePopup>:
    title_size: 20
    title: 'Edit Expense'
    size_hint: None, None
    size: 1000, 230  # Adjust size as needed

    BoxLayout:
        orientation: 'vertical'

        BoxLayout:
            orientation: 'horizontal'
            padding: 10

            Label:
                size_hint: 0.2, 1
                font_size: 20
                text: 'ID'

            Label:
                size_hint: 0.5, 1
                font_size: 20
                text: 'Amount'

            Label:
                font_size: 20
                text: 'Date'

            Label:
                size_hint: 0.7, 1
                font_size: 20
                text: 'Deduct %'

            Label:
                font_size: 20
                text: 'Serial Number'

            Label:
                font_size: 20
                text: 'ID Expense'

            Label
                font_size: 20
                text: 'ID Income'
            
            Label
                size_hint: 0.3, 1
                font_size: 20
                text: 'VAT'

        BoxLayout:
            orientation: 'horizontal'
            padding: 10

            Label:
                size_hint: 0.2, 1
                font_size: 20
                text: root.id_prop

            TextInput:
                size_hint: 0.5, 1
                font_size: 20
                input_type: 'number'
                input_filter: 'float'
                id: amount_input
                multiline: False

            TextInput:
                font_size: 20
                id: date_input
                multiline: False

            TextInput:
                font_size: 20
                size_hint: 0.7, 1
                input_type: 'number'
                input_filter: 'float'
                id: deduct_percent_input
                multiline: False

            TextInput:
                font_size: 20
                id: serialnr_input
                multiline: False

            TextInput:
                font_size: 20
                input_type: 'number'
                input_filter: 'int'
                id: id_expense_input
                multiline: False

            TextInput:
                font_size: 20
                input_type: 'number'
                input_filter: 'int'
                id: id_income_input
                multiline: False

            CheckBox:
                size_hint: 0.3, 1
                id: vat_check
                active: True if root.check_vat_prop else False
                #on_active: root.on_checkbox_active(self, self.active)

        BoxLayout:
            size_hint_y: None
            height: '44dp'

            Button:
                text: 'Save'
                on_press: root.save()

            Button:
                text: 'Cancel'
                on_press: root.dismiss()

<ExpenseWidget>:
    orientation: 'horizontal'
    size_hint: 1, None
    height: 50
    padding: [10, 10]

    Label:
        size_hint: 0.15, 1
        widget: 10
        font_size: 20
        id: id_label
        text: root.id_prop

    Label:
        size_hint: 0.5, 1
        font_size: 20
        id: amount_label
        text: root.amount_prop
    
    Label:
        font_size: 20
        id: date_label
        text: root.date_prop

    Label:
        size_hint: 0.7, 1
        font_size: 20
        id: deduct_percent_label
        text: root.deduct_percent_prop

    Label:
        font_size: 20
        id: serialnr_label
        text: root.serialnr_prop

    Label:
        size_hint: 0.7, 1
        font_size: 20
        id: id_expense_label
        text: root.id_expense_prop

    Label:
        size_hint: 0.7, 1
        font_size: 20
        id: id_income_label
        text: root.id_income_prop

    Label:
        size_hint: 0.3, 1
        font_size: 20
        id: check_vat
        text: 'yes' if root.check_vat_prop else 'no'

    Button:
        font_size: 20
        size_hint: 0.5, 1
        id: edit_button
        text: 'Edit'
        on_press: root.edit_expense()

    Button:
        font_size: 20
        size_hint: 0.5, 1
        id: delete_button
        text: 'Delete'
        on_press: root.delete_expense() 


<ExpenseLayout>:
    orientation: 'vertical'
    canvas.before:
        Color:
            rgba: 1, 0.2, 0.1, 0.2
        Rectangle:
            # self here refers to the widget i.e FloatLayout
            pos: self.pos
            size: self.size

    BoxLayout:
        size_hint: 1, None
        height: 30
        orientation: 'horizontal'
        padding: 10, 10

        Label:
            size_hint: 0.15, 1
            font_size: 20
            text: 'ID'

        Label:
            size_hint: 0.5, 1
            font_size: 20
            text: 'Amount'

        Label:
            font_size: 20
            text: 'Date'

        Label:
            size_hint: 0.7, 1
            font_size: 20
            text: 'Deduct %'

        Label:
            font_size: 20
            text: 'Serial Nr'

        Label:
            size_hint: 0.7, 1
            font_size: 20
            text: 'ID Expense'

        Label:
            size_hint: 0.7, 1
            font_size: 20
            text: 'ID Income'
        
        Label:
            size_hint: 0.3, 1
            font_size: 20
            text: 'VAT'

        Label:
            size_hint: 0.5, 1
            font_size: 20
            text: ''

        Label:
            size_hint: 0.5, 1
            font_size: 20
            text: ''

    ScrollView:
        id: scroll
        do_scroll_x: False  # Disable horizontal scrolling

        BoxLayout:
            id: expense_entries
            orientation: 'vertical'
            size_hint_y: None
            height: self.minimum_height
            spacing: 10

    BoxLayout:
        orientation: 'horizontal'
        size_hint: None, None
        size: root.width, 30

        TextInput:
            size_hint: 0.7, 1
            id: amount_input
            input_type: 'number'
            input_filter: 'float'
            multiline: False
            hint_text: 'Amount'

        TextInput:
            id: date_input
            hint_text: 'Date'
        
        TextInput:
            size_hint: 0.7, 1
            id: deduct_percent_input
            input_type: 'number'
            input_filter: 'float'
            multiline: False
            hint_text: 'Deduct % (100)'

        TextInput:
            id: serialnr_input
            hint_text: 'Serial Number'

        TextInput:
            size_hint: 0.6, 1
            id: id_expense_input
            input_type: 'number'
            input_filter: 'int'
            multiline: False
            hint_text: 'ID Expense'

        TextInput:
            size_hint: 0.6, 1
            id: id_income_input
            input_type: 'number'
            input_filter: 'int'
            multiline: False
            hint_text: 'ID Income'

        Label:
            size_hint: 0.3, 1
            text: 'VAT:'

        CheckBox:
            size_hint: 0.4, 1
            id: vat_check
            active: False
            #on_active: root.on_checkbox_active(self, self.active)

        Button:
            text: 'Add Expense'
            on_press: root.add_expense()

<MainWindow>:
    orientation: 'vertical'
    padding: '10dp'
    spacing: '10dp'

    BoxLayout:
        orientation: 'horizontal'
        spacing: 10
        
        IncomeLayout:
            size_hint: 0.8, 1
        ExpenseLayout:
            
    BoxLayout:
        size_hint: 1, 0.2
        canvas:
            Color:
                rgba: 1, 0, 0, 1  # Red color (replace with desired color values)
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            id: test_label
            text: 'just some random text'

    Button:
        text: 'Reload'
        size_hint: None, None
        size: 100, 50
        pos_hint: {'top': 1, 'left': 1}
        on_press: app.reload_app(self)
